(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();const m=50,I=100,h="https://raw.githubusercontent.com/twitter/twemoji/master/assets/72x72/",d=[{radius:12,score:10,img:h+"1f352.png"},{radius:18,score:20,img:h+"1f353.png"},{radius:24,score:40,img:h+"1f347.png"},{radius:30,score:80,img:h+"1f34a.png"},{radius:38,score:160,img:h+"1f34b.png"},{radius:46,score:320,img:h+"1f348.png"},{radius:54,score:640,img:h+"1f34d.png"},{radius:64,score:1280,img:h+"1f351.png"},{radius:76,score:2560,img:h+"1f34f.png"},{radius:88,score:5120,img:h+"1f34e.png"},{radius:104,score:10240,img:h+"1f349.png"}],g={FRICTION:.3,RESTITUTION:.2,DENSITY:.001},f={RESTITUTION_PER_LEVEL:.08,FRICTION_PER_LEVEL:-.03,EXPLOSION_PER_LEVEL:.05},E=.08,C=[0,3e3,8e3,15e3,25e3,4e4,6e4,85e3,115e3,15e4],M=400;class S{constructor(e){this.Engine=Matter.Engine,this.Render=Matter.Render,this.Runner=Matter.Runner,this.Composite=Matter.Composite,this.Bodies=Matter.Bodies,this.Events=Matter.Events,this.engine=this.Engine.create(),this.world=this.engine.world;const i=document.getElementById(e),t=i.parentElement,s=t.clientWidth,n=t.clientHeight;this.render=this.Render.create({canvas:i,engine:this.engine,options:{width:s,height:n,wireframes:!1,background:"#2a2a2a"}}),this.gameWidth=s,this.gameHeight=n,this.createBoundaries(),this.Render.run(this.render),this.runner=this.Runner.create(),this.Runner.run(this.runner,this.engine)}createBoundaries(){const e=this.Bodies.rectangle(this.gameWidth/2,this.gameHeight+m/2,this.gameWidth,m,{isStatic:!0,render:{visible:!1}}),i=this.Bodies.rectangle(-m/2,this.gameHeight/2,m,this.gameHeight*2,{isStatic:!0,render:{visible:!1}}),t=this.Bodies.rectangle(this.gameWidth+m/2,this.gameHeight/2,m,this.gameHeight*2,{isStatic:!0,render:{visible:!1}});this.Composite.add(this.world,[e,i,t])}addBody(e){this.Composite.add(this.world,e)}removeBody(e){this.Composite.remove(this.world,e)}}class v{static create(e,i,t){const s=d[t],n=s.radius,a=Matter.Bodies.circle(e,i,n,{restitution:g.RESTITUTION,friction:g.FRICTION,density:g.DENSITY,render:{sprite:{texture:s.img,xScale:n*2/72,yScale:n*2/72}},label:"circle"});return a.gameData={level:t,hasMerged:!1},a}}class T{constructor(){this.scoreElement=document.getElementById("score"),this.targetScoreElement=document.getElementById("target-score"),this.levelElement=document.getElementById("level"),this.nextCircleElement=document.getElementById("next-circle"),this.scoreIcon=document.getElementById("score-icon"),this.resultScreen=document.getElementById("result-screen"),this.resultTitle=document.getElementById("result-title"),this.resultScore=document.getElementById("result-score"),this.resultButton=document.getElementById("result-button"),this.effectsContainer=document.getElementById("effects-container"),this.btnRemove=document.getElementById("btn-remove"),this.btnUpgrade=document.getElementById("btn-upgrade"),this.btnVibration=document.getElementById("btn-vibration"),this.itemButtons={remove:this.btnRemove,upgrade:this.btnUpgrade,vibration:this.btnVibration},this.currentDisplayedScore=0,this.targetScore=0,this.scoreAnimationId=null}updateScore(e,i){this.targetScore=e,this.scoreAnimationId||this.animateScore();const t=C[i]||"MAX";this.targetScoreElement.textContent=t}animateScore(){if(this.currentDisplayedScore<this.targetScore){const e=this.targetScore-this.currentDisplayedScore,i=Math.ceil(e/10);this.currentDisplayedScore+=i,this.scoreElement.textContent=this.currentDisplayedScore,this.scoreAnimationId=requestAnimationFrame(()=>this.animateScore())}else this.currentDisplayedScore=this.targetScore,this.scoreElement.textContent=this.currentDisplayedScore,this.scoreAnimationId=null}updateLevel(e){this.levelElement.textContent=e}updateNextCircle(e){const i=d[e];this.nextCircleElement.innerHTML="";const t=document.createElement("img");t.src=i.img,t.style.width="100%",t.style.height="100%",t.style.objectFit="contain",this.nextCircleElement.appendChild(t)}showResult(e,i){this.resultScreen.style.display="flex",this.resultTitle.textContent=i?"MISSION COMPLETE!":"GAME OVER",this.resultScore.textContent=`Final Score: ${e}`,this.resultTitle.style.color=i?"#00FF00":"#FF0000",this.resultButton.textContent="Play Again",this.resultButton.onclick=t=>{t.stopPropagation(),location.reload()}}showMissionComplete(e,i,t,s){this.resultScreen.style.display="flex",this.resultTitle.textContent=`LEVEL ${e} CLEARED!`,this.resultTitle.style.color="#00FFFF";const n={remove:"üóëÔ∏è",upgrade:"‚¨ÜÔ∏è",vibration:"üì≥"},a={remove:"Remove",upgrade:"Upgrade",vibration:"Vibration"};this.resultScore.innerHTML=`Current Score: ${i}<br><br>üéÅ Acquired: ${n[t]} ${a[t]}`,this.resultButton.textContent="Next Level",this.resultButton.onclick=c=>{c.stopPropagation(),this.resultScreen.style.display="none",s()}}toggleItemActive(e,i){Object.values(this.itemButtons).forEach(t=>t.classList.remove("active")),i&&this.itemButtons[e]&&this.itemButtons[e].classList.add("active")}setupItemListeners(e){this.btnRemove.onclick=()=>e("remove"),this.btnUpgrade.onclick=()=>e("upgrade"),this.btnVibration.onclick=()=>e("vibration")}updateItemCount(e,i){const t=this.itemButtons[e];if(!t)return;let s=t.querySelector(".item-count");s||(s=document.createElement("span"),s.className="item-count",t.appendChild(s)),s.textContent=i,i<=0?t.classList.add("disabled"):t.classList.remove("disabled")}updateAllItemCounts(e){this.updateItemCount("remove",e.remove),this.updateItemCount("upgrade",e.upgrade),this.updateItemCount("vibration",e.vibration)}spawnMergeEffect(e,i,t){const s=this.scoreIcon.getBoundingClientRect(),n=document.getElementById("game-container").getBoundingClientRect(),a=s.left-n.left+s.width/2,c=s.top-n.top+s.height/2;for(let r=0;r<3;r++){const o=document.createElement("div");o.className="particle star",o.textContent="‚≠ê",o.style.left=e+(Math.random()*40-20)+"px",o.style.top=i+(Math.random()*40-20)+"px";const l=o.animate([{transform:"scale(0.5)",opacity:1,left:o.style.left,top:o.style.top},{transform:"scale(0.2)",opacity:0,left:a+"px",top:c+"px"}],{duration:500,easing:"ease-in",fill:"forwards"});this.effectsContainer.appendChild(o),l.onfinish=()=>{o.remove(),r===0&&this.triggerScoreFlash()}}this.spawnExplosionParticles(e,i)}spawnExplosionParticles(e,i){const t=["üí•","‚ú®"];for(let s=0;s<6;s++){const n=document.createElement("div");n.className="particle explosion",n.textContent=t[s%2],n.style.left=e+"px",n.style.top=i+"px";const a=Math.PI*2*s/6,c=50,r=e+Math.cos(a)*c,o=i+Math.sin(a)*c,l=n.animate([{transform:"translate(0, 0) scale(1)",opacity:1},{transform:`translate(${r-e}px, ${o-i}px) scale(0)`,opacity:0}],{duration:350,easing:"ease-out"});this.effectsContainer.appendChild(n),l.onfinish=()=>n.remove()}}spawnBounceEffect(e,i){const t=document.createElement("div");t.className="particle puff",t.textContent="üí®",t.style.left=e+"px",t.style.top=i+"px";const s=t.animate([{transform:"scale(0.3)",opacity:.5},{transform:"scale(1)",opacity:0}],{duration:200,easing:"ease-out"});this.effectsContainer.appendChild(t),s.onfinish=()=>t.remove()}spawnItemEffect(e,i,t){const s={remove:"üóëÔ∏è",upgrade:"‚¨ÜÔ∏è",vibration:"üì≥"};for(let c=0;c<4;c++){const r=document.createElement("div");r.className="particle sparkle",r.textContent="‚ú®",r.style.left=e+(Math.random()*50-25)+"px",r.style.top=i+(Math.random()*50-25)+"px";const o=r.animate([{transform:"scale(0)",opacity:1},{transform:"scale(1)",opacity:0}],{duration:350,easing:"ease-out"});this.effectsContainer.appendChild(r),o.onfinish=()=>r.remove()}const n=document.createElement("div");n.className="particle item-icon",n.textContent=s[t],n.style.left=e+"px",n.style.top=i+"px";const a=n.animate([{transform:"scale(1.5)",opacity:1},{transform:"scale(0)",opacity:0}],{duration:400,easing:"ease-out"});this.effectsContainer.appendChild(n),a.onfinish=()=>n.remove()}spawnLevelCompleteEffect(){const e=["üéä","üéâ","‚ú®","‚≠ê"];for(let i=0;i<12;i++)setTimeout(()=>{const t=document.createElement("div");t.className="particle confetti",t.textContent=e[Math.floor(Math.random()*e.length)],t.style.left=Math.random()*100+"%",t.style.top="-20px";const s=t.animate([{transform:"translateY(0)",opacity:1},{transform:`translateY(${window.innerHeight}px)`,opacity:.5}],{duration:1200,easing:"ease-in"});document.body.appendChild(t),s.onfinish=()=>t.remove()},i*100)}triggerScoreFlash(){this.scoreIcon.classList.remove("flash"),this.scoreIcon.offsetWidth,this.scoreIcon.classList.add("flash")}}class L{constructor(){this.audioContext=null,this.masterGain=null,this.bgmGain=null,this.sfxGain=null,this.isMuted=!1,this.volume=.7,this.bgmSource=null,this.isInitialized=!1,this.loadSettings()}async init(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.sfxGain=this.audioContext.createGain(),this.sfxGain.connect(this.masterGain),this.masterGain.connect(this.audioContext.destination),this.masterGain.gain.value=this.isMuted?0:this.volume,this.sfxGain.gain.value=.6,this.isInitialized=!0,this.audioContext.state==="suspended"&&await this.audioContext.resume()}catch(e){console.error("Audio initialization failed:",e)}}async play(e){if(this.isInitialized||await this.init(),!this.audioContext)return;if(this.audioContext.state==="suspended")try{await this.audioContext.resume()}catch(t){console.warn("Could not resume audio:",t);return}const i=this.audioContext.currentTime;try{switch(e){case"drop":this.playDrop(i);break;case"merge":this.playMerge(i);break;case"score":this.playScore(i);break;case"itemUse":this.playItemUse(i);break;case"levelComplete":this.playLevelComplete(i);break;case"gameOver":this.playGameOver(i);break}}catch(t){console.warn("Sound play failed:",t)}}playDrop(e){const i=this.audioContext.createOscillator(),t=this.audioContext.createGain();i.connect(t),t.connect(this.sfxGain),i.type="sine",i.frequency.setValueAtTime(200,e),i.frequency.exponentialRampToValueAtTime(50,e+.1),t.gain.setValueAtTime(.3,e),t.gain.exponentialRampToValueAtTime(.01,e+.1),i.start(e),i.stop(e+.1)}playBounce(e){const i=this.audioContext.createOscillator(),t=this.audioContext.createGain();i.connect(t),t.connect(this.sfxGain),i.type="square",i.frequency.setValueAtTime(300,e),i.frequency.exponentialRampToValueAtTime(150,e+.05),t.gain.setValueAtTime(.2,e),t.gain.exponentialRampToValueAtTime(.01,e+.05),i.start(e),i.stop(e+.05)}playMerge(e){[0,.1,.2].forEach((i,t)=>{const s=this.audioContext.createOscillator(),n=this.audioContext.createGain();s.connect(n),n.connect(this.sfxGain),s.type="sine";const a=[523.25,659.25,783.99][t];s.frequency.setValueAtTime(a,e+i),n.gain.setValueAtTime(.3,e+i),n.gain.exponentialRampToValueAtTime(.01,e+i+.5),s.start(e+i),s.stop(e+i+.5)})}playScore(e){const i=this.audioContext.createOscillator(),t=this.audioContext.createGain();i.connect(t),t.connect(this.sfxGain),i.type="sine",i.frequency.setValueAtTime(800,e),i.frequency.exponentialRampToValueAtTime(1200,e+.1),t.gain.setValueAtTime(.2,e),t.gain.exponentialRampToValueAtTime(.01,e+.1),i.start(e),i.stop(e+.1)}playItemUse(e){const i=this.audioContext.createOscillator(),t=this.audioContext.createGain();i.connect(t),t.connect(this.sfxGain),i.type="sawtooth",i.frequency.setValueAtTime(100,e),i.frequency.exponentialRampToValueAtTime(500,e+.2),t.gain.setValueAtTime(.3,e),t.gain.exponentialRampToValueAtTime(.01,e+.2),i.start(e),i.stop(e+.2)}playLevelComplete(e){[523.25,659.25,783.99,1046.5].forEach((t,s)=>{const n=this.audioContext.createOscillator(),a=this.audioContext.createGain();n.connect(a),a.connect(this.sfxGain),n.type="triangle",n.frequency.setValueAtTime(t,e+s*.15),a.gain.setValueAtTime(.3,e+s*.15),a.gain.exponentialRampToValueAtTime(.01,e+s*.15+.3),n.start(e+s*.15),n.stop(e+s*.15+.3)})}playGameOver(e){const i=this.audioContext.createOscillator(),t=this.audioContext.createGain();i.connect(t),t.connect(this.sfxGain),i.type="sine",i.frequency.setValueAtTime(400,e),i.frequency.exponentialRampToValueAtTime(100,e+.8),t.gain.setValueAtTime(.3,e),t.gain.setValueAtTime(.3,e+.7),t.gain.exponentialRampToValueAtTime(.01,e+.8),i.start(e),i.stop(e+.8)}setVolume(e){this.volume=e,this.masterGain&&!this.isMuted&&(this.masterGain.gain.value=e),this.saveSettings()}toggleMute(){return this.isMuted=!this.isMuted,this.masterGain&&(this.masterGain.gain.value=this.isMuted?0:this.volume),this.saveSettings(),this.isMuted}saveSettings(){localStorage.setItem("gameAudioSettings",JSON.stringify({volume:this.volume,isMuted:this.isMuted}))}loadSettings(){try{const e=JSON.parse(localStorage.getItem("gameAudioSettings"));e&&(this.volume=e.volume??.7,this.isMuted=e.isMuted??!1)}catch{}}}const B=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;class O{constructor(){this.physics=new S("world"),this.ui=new T,this.audio=new L,this.isMobileDevice=B(),this.isMobileDevice&&console.log("Mobile device detected - effects disabled for performance"),this.score=0,this.level=1,this.nextCircleLevel=0,this.currentCircle=null,this.canDrop=!0,this.isGameOver=!1,this.isMissionComplete=!1,this.activeItem=null,this.activeVibrations=[],this.itemInventory={remove:3,upgrade:3,vibration:3},this.setupInput(),this.setupUI(),this.setupCollision(),this.setupGameLoop(),this.spawnNextCircle(),this.ui.updateScore(this.score,this.level),this.ui.updateAllItemCounts(this.itemInventory)}setupUI(){this.ui.setupItemListeners(e=>{this.activeItem===e?(this.activeItem=null,this.ui.toggleItemActive(e,!1)):(this.activeItem=e,this.ui.toggleItemActive(e,!0))})}setupInput(){const e=document.getElementById("game-container");e.addEventListener("mousemove",i=>{this.currentCircle&&this.canDrop&&!this.isGameOver&&!this.isMissionComplete&&!this.activeItem&&this.updateCurrentCirclePosition(i.clientX)}),e.addEventListener("click",i=>{this.audio.isInitialized||this.audio.init(),!(this.isGameOver||this.isMissionComplete)&&(this.activeItem?this.handleItemClick(i):this.currentCircle&&this.canDrop&&(this.updateCurrentCirclePosition(i.clientX),this.dropCircle()))}),e.addEventListener("touchstart",async()=>{this.audio.isInitialized||await this.audio.init()},{once:!0})}handleItemClick(e){if(this.itemInventory[this.activeItem]<=0){this.ui.toggleItemActive(this.activeItem,!1),this.activeItem=null;return}const i=document.getElementById("game-container").getBoundingClientRect(),t=e.clientX-i.left,s=e.clientY-i.top,a=Matter.Query.point(Matter.Composite.allBodies(this.physics.world),{x:t,y:s}).find(c=>c.label==="circle"&&!c.isStatic&&!c.isSensor);a&&(this.applyItem(a),this.itemInventory[this.activeItem]--,this.ui.updateItemCount(this.activeItem,this.itemInventory[this.activeItem]),this.ui.toggleItemActive(this.activeItem,!1),this.audio.play("itemUse"),this.activeItem=null)}applyItem(e){switch(this.activeItem){case"remove":this.physics.removeBody(e),this.ui.spawnItemEffect(e.position.x,e.position.y,"remove");break;case"upgrade":if(e.gameData.level<d.length-1){const i=e.gameData.level+1,{x:t,y:s}=e.position;this.physics.removeBody(e);const n=v.create(t,s,i);this.applyLevelPhysics(n),this.physics.addBody(n),this.ui.spawnItemEffect(t,s,"upgrade")}break;case"vibration":this.applyVibration(e),this.ui.spawnItemEffect(e.position.x,e.position.y,"vibration");break}}applyVibration(e){this.activeVibrations.push({body:e,startTime:Date.now(),duration:3e3})}createParticles(e,i,t){this.ui.spawnMergeEffect(e,i,0)}updateCurrentCirclePosition(e){const i=document.getElementById("game-container"),t=i.getBoundingClientRect();let s=e-t.left;const n=this.currentCircle.circleRadius,a=i.clientWidth;s=Math.max(n+m/2,Math.min(s,a-n-m/2)),Matter.Body.setPosition(this.currentCircle,{x:s,y:50})}spawnNextCircle(){if(this.isGameOver||this.isMissionComplete)return;if(this.currentCircle){console.warn("Attempted to spawn circle while one already exists");return}const e=this.nextCircleLevel,t=document.getElementById("game-container").clientWidth;this.currentCircle=v.create(t/2,50,e),this.currentCircle.isSensor=!0,this.currentCircle.isStatic=!0,this.physics.addBody(this.currentCircle),this.nextCircleLevel=Math.floor(Math.random()*3),this.ui.updateNextCircle(this.nextCircleLevel),this.canDrop=!0}dropCircle(){this.currentCircle&&(this.canDrop=!1,this.currentCircle.isSensor=!1,this.currentCircle.isStatic=!1,this.applyLevelPhysics(this.currentCircle),Matter.Body.setVelocity(this.currentCircle,{x:0,y:5}),this.currentCircle=null,this.isMobileDevice||this.audio.play("drop"),setTimeout(()=>{!this.isGameOver&&!this.isMissionComplete&&this.spawnNextCircle()},M))}applyLevelPhysics(e){const i=this.level-1;e.restitution=Math.min(1.2,g.RESTITUTION+i*f.RESTITUTION_PER_LEVEL),e.friction=Math.max(0,g.FRICTION+i*f.FRICTION_PER_LEVEL)}setupCollision(){Matter.Events.on(this.physics.engine,"collisionStart",e=>{const i=e.pairs;for(let t=0;t<i.length;t++){const s=i[t].bodyA,n=i[t].bodyB;s.gameData&&n.gameData&&this.handleMerge(s,n)}})}handleMerge(e,i){if(e.gameData.level===i.gameData.level&&!e.gameData.hasMerged&&!i.gameData.hasMerged){e.gameData.hasMerged=!0,i.gameData.hasMerged=!0;const t=e.gameData.level+1,s=(e.position.x+i.position.x)/2,n=(e.position.y+i.position.y)/2;if(this.physics.removeBody(e),this.physics.removeBody(i),this.addScore(d[e.gameData.level].score*2),this.isMobileDevice||(this.ui.spawnMergeEffect(s,n,d[e.gameData.level].score*2),this.audio.play("merge")),this.applyExplosion(s,n,d[e.gameData.level].radius,!1),t<d.length){const a=v.create(s,n,t);this.applyLevelPhysics(a),this.physics.addBody(a)}else this.addScore(d[e.gameData.level].score*4)}}applyExplosion(e,i,t,s=!1){const n=Matter.Composite.allBodies(this.physics.world),a=this.level-1,c=E;let r;s?r=.5:r=(c+a*f.EXPLOSION_PER_LEVEL)*(t/20),n.forEach(o=>{if(o.isStatic)return;const l={x:o.position.x-e,y:o.position.y-i},p=Math.sqrt(l.x*l.x+l.y*l.y);if(p<(s?400:300)&&p>0){const x={x:l.x/p*r*o.mass,y:l.y/p*r*o.mass};Matter.Body.applyForce(o,o.position,x)}})}addScore(e){this.score+=e,this.ui.updateScore(this.score,this.level),this.isMobileDevice||this.audio.play("score");const i=C[this.level];this.score>=i&&!this.isMissionComplete&&this.missionComplete()}missionComplete(){this.isMissionComplete=!0;const e=this.rewardRandomItem();this.isMobileDevice||(this.ui.spawnLevelCompleteEffect(),this.audio.play("levelComplete")),this.ui.showMissionComplete(this.level,this.score,e,()=>{this.nextLevel()})}rewardRandomItem(){const e=["remove","upgrade","vibration"],i=e[Math.floor(Math.random()*e.length)];return this.itemInventory[i]++,this.ui.updateItemCount(i,this.itemInventory[i]),i}nextLevel(){this.level++,this.ui.updateLevel(this.level),this.ui.updateScore(this.score,this.level),this.isMissionComplete=!1,this.isGameOver=!1,this.currentCircle&&(this.physics.removeBody(this.currentCircle),this.currentCircle=null),this.canDrop=!1,this.spawnNextCircle(),setTimeout(()=>{!this.isGameOver&&!this.isMissionComplete&&(this.canDrop=!0)},1e3)}setupGameLoop(){Matter.Events.on(this.physics.engine,"afterUpdate",()=>{if(this.isGameOver)return;const e=Matter.Composite.allBodies(this.physics.world),i=Date.now();this.activeVibrations=this.activeVibrations.filter(t=>i-t.startTime>t.duration?(t.body&&t.body.isStatic&&Matter.Body.setStatic(t.body,!1),!1):(t.body&&!t.body.isStatic&&Matter.Body.setStatic(t.body,!0),t.body&&Matter.Body.setAngularVelocity(t.body,.15),e.forEach(s=>{if(s.isStatic||s.isSensor||s===t.body)return;const n=s.position.x-t.body.position.x,a=s.position.y-t.body.position.y;if(Math.sqrt(n*n+a*a)<250){const r=.003*s.mass;Matter.Body.applyForce(s,s.position,{x:(Math.random()-.5)*r,y:(Math.random()-.5)*r})}}),!0));for(const t of e)if(!(t.isStatic||t.isSensor))if(t.position.y<I){if(!t.gameData.deadlineWarningTime)t.gameData.deadlineWarningTime=Date.now();else if(Date.now()-t.gameData.deadlineWarningTime>500){this.triggerSlowMotionGameOver();break}}else t.gameData.deadlineWarningTime=null})}triggerSlowMotionGameOver(){if(this.isGameOver)return;this.isGameOver=!0;const e=this.physics.engine.timing.timeScale;let i=e;const t=800,s=600,n=400,a=.2,c=Date.now(),r=()=>{const o=Date.now()-c;if(o<t){const l=o/t;i=e-(e-a)*l,this.physics.engine.timing.timeScale=i,requestAnimationFrame(r)}else if(o<t+s)this.physics.engine.timing.timeScale=a,requestAnimationFrame(r);else if(o<t+s+n){const p=(o-(t+s))/n;i=a+(e-a)*p,this.physics.engine.timing.timeScale=i,requestAnimationFrame(r)}else this.physics.engine.timing.timeScale=e,this.gameOver()};r()}gameOver(){this.isGameOver||(this.isMissionComplete=!1,this.isMobileDevice||this.audio.play("gameOver"),this.ui.showResult(this.score,!1))}}function y(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}window.addEventListener("resize",y);window.addEventListener("orientationchange",y);y();window.addEventListener("DOMContentLoaded",()=>{const u=new O,e=document.getElementById("mute-btn"),i=document.getElementById("volume-slider");e.addEventListener("click",()=>{const t=u.audio.toggleMute();e.textContent=t?"üîá":"üîä"}),i.addEventListener("input",t=>{u.audio.setVolume(t.target.value/100)}),u.audio.isMuted&&(e.textContent="üîá")});
