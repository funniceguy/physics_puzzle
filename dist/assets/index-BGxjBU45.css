:root{--color-primary: #4CC9F0;--color-secondary: #7209B7;--bg-deep-blue: linear-gradient(135deg, #1A1A2E 0%, #16213E 100%);--bg-surface-glass: rgba(255, 255, 255, .05);--bg-game-container: rgba(30, 30, 40, .6);--color-success: linear-gradient(135deg, #4CAF50, #45A049);--color-danger: linear-gradient(135deg, #FF6B6B, #EE5A6F);--color-warning: linear-gradient(45deg, #FF0055, #FF5500);--color-text-white: #ffffff;--color-text-dim: rgba(255, 255, 255, .7);--app-height: 100vh;--width-max-app: 1080px;--width-game: 400px;--radius-small: 8px;--radius-medium: 16px;--radius-large: 24px;--z-background: 0;--z-game-ui: 5;--z-hud: 10;--z-effects: 15;--z-overlays: 20;--z-popups: 10000}html{height:-webkit-fill-available}body{margin:0;padding:10px;display:flex;justify-content:center;align-items:center;height:var(--app-height);min-height:-webkit-fill-available;background:var(--bg-deep-blue);font-family:Outfit,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;box-sizing:border-box;color:var(--color-text-white);position:fixed;width:100%;top:0;left:0}#main-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:20px;width:100%;height:100%;max-width:var(--width-max-app);margin:0 auto;padding:20px;box-sizing:border-box}#game-container{position:relative;width:100%;max-width:var(--width-game);height:auto;aspect-ratio:2 / 3;max-height:calc(var(--app-height) - 150px);background-color:var(--bg-game-container);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:var(--radius-medium);box-shadow:0 8px 32px #0000005e;overflow:hidden;flex:1;min-height:0;display:none}#top-line{position:absolute;top:100px;left:0;width:100%;height:2px;background:linear-gradient(90deg,transparent,rgba(255,50,50,.5),transparent);pointer-events:none;z-index:var(--z-game-ui);border-bottom:1px dashed rgba(255,50,50,.3)}#ui-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--z-hud);display:none;flex-direction:column;justify-content:space-between}#top-bar{background:var(--bg-surface-glass);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border-bottom:1px solid rgba(255,255,255,.1);padding:12px 15px;display:flex;justify-content:space-between;align-items:center;color:var(--color-text-white);font-weight:600;pointer-events:none;box-shadow:0 4px 6px #0000001a}#top-bar>*{pointer-events:auto}#level-info{font-size:16px;color:var(--color-primary);text-shadow:0 0 10px rgba(76,201,240,.5)}#score-info{font-size:14px;display:flex;align-items:center;gap:5px}#score-icon{display:inline-block;margin-right:5px;transition:transform .1s}#score-icon.flash{animation:flashIcon .2s ease-out}@keyframes flashIcon{0%{transform:scale(1);filter:brightness(1)}50%{transform:scale(1.5);filter:brightness(2)}to{transform:scale(1);filter:brightness(1)}}#item-bar{padding:12px;display:none;justify-content:center;gap:20px;background:var(--bg-surface-glass);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:var(--radius-large);width:auto;min-width:260px;pointer-events:auto;flex-shrink:0;box-shadow:0 4px 16px #0003}.item-btn{width:55px;height:55px;border-radius:var(--radius-medium);border:1px solid rgba(255,255,255,.2);background:#ffffff1a;font-size:26px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;justify-content:center;align-items:center;padding:0;pointer-events:auto;position:relative;overflow:visible}.item-btn:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#ffffff1a,#fff0);opacity:0;transition:opacity .3s}.item-btn:hover{transform:translateY(-2px);background:#fff3;box-shadow:0 5px 15px #0000004d;border-color:#fff6}.item-btn:hover:before{opacity:1;background:#0003;padding:5px 10px;border-radius:20px}.item-btn.active{background:#4cc9f04d;box-shadow:0 0 20px #4cc9f066;border-color:var(--color-primary)}.item-btn.disabled{opacity:.4;cursor:not-allowed;pointer-events:none}.item-btn:active{transform:translateY(0)}.item-count{position:absolute;top:-8px;right:-8px;background:var(--color-danger);color:#fff;font-size:11px;font-weight:700;min-width:18px;height:18px;border-radius:9px;display:flex;align-items:center;justify-content:center;padding:0 5px;box-shadow:0 2px 8px #0000004d;border:2px solid rgba(255,255,255,.3)}#next-circle-container{display:flex;align-items:center;gap:8px;background:#0003;padding:4px 8px;border-radius:var(--radius-medium);font-size:13px}#next-circle{width:25px;height:25px;border-radius:50%;background-color:transparent;display:flex;justify-content:center;align-items:center;box-shadow:inset 0 0 10px #0003}canvas{display:block;border-radius:var(--radius-small);width:100%;height:100%}#result-screen{position:absolute;top:0;left:0;width:100%;height:100%;background:#0a0a14f2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:none;flex-direction:column;justify-content:center;align-items:center;z-index:var(--z-overlays);border-radius:var(--radius-medium);animation:fadeIn .5s ease-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}#result-title{font-size:36px;margin-bottom:20px;text-transform:uppercase;letter-spacing:4px;text-align:center;background:var(--color-warning);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 10px rgba(255,85,0,.5))}#result-score{font-size:24px;color:#fff;margin-bottom:30px;font-weight:300}button#result-button{padding:12px 35px;font-size:18px;background:var(--color-success);color:#fff;border:none;border-radius:30px;cursor:pointer;transition:all .3s;pointer-events:auto;font-weight:600;box-shadow:0 4px 15px #4caf5066;text-transform:uppercase;letter-spacing:1px}button#result-button:hover{transform:scale(1.05);box-shadow:0 6px 20px #4caf5099}#effects-container{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:var(--z-effects);overflow:hidden}.star{position:absolute;font-size:20px;color:gold;animation:flyToScore 1s cubic-bezier(.4,0,.2,1) forwards;text-shadow:0 0 5px yellow;z-index:100}@keyframes flyToScore{0%{transform:scale(.5) rotate(0);opacity:1}to{top:20px;left:50%;transform:scale(.2) rotate(360deg);opacity:0}}#audio-controls{display:flex;align-items:center;gap:10px;background:var(--bg-surface-glass);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:8px 15px;flex-shrink:0}#mute-btn{background:none;border:none;font-size:24px;cursor:pointer;transition:transform .2s;padding:0}#mute-btn:hover{transform:scale(1.1)}#mute-btn:active{transform:scale(.95)}#volume-slider{width:80px;height:4px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff3;border-radius:2px;outline:none}#volume-slider::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;background:var(--color-primary);border-radius:50%;cursor:pointer}#volume-slider::-moz-range-thumb{width:14px;height:14px;background:var(--color-primary);border-radius:50%;cursor:pointer;border:none}.particle{position:absolute;pointer-events:none;z-index:100;font-size:20px;-webkit-user-select:none;user-select:none}.particle.explosion{font-size:16px}.particle.puff{font-size:18px;opacity:.7}.particle.sparkle{font-size:14px}.particle.item-icon{font-size:32px}.particle.confetti{position:fixed;font-size:24px;z-index:1000}.screen{display:none;width:100%;height:100%;position:absolute;top:0;left:0;justify-content:center;align-items:center;z-index:var(--z-overlays)}.screen.active{display:flex}#home-confirm-dialog{position:fixed;top:0;left:0;width:100%;height:100%;z-index:var(--z-popups)}.confirm-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#000000b3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);display:flex;justify-content:center;align-items:center;animation:fadeIn .2s ease-out}.confirm-box{background:var(--bg-deep-blue);border:2px solid rgba(76,201,240,.3);border-radius:20px;padding:30px;max-width:320px;width:90%;box-shadow:0 10px 40px #00000080;animation:slideUp .3s ease-out}.confirm-title{font-size:22px;font-weight:700;color:var(--color-primary);text-align:center;margin-bottom:15px}.confirm-message{font-size:16px;color:#ffffffe6;text-align:center;margin-bottom:25px;line-height:1.5}.confirm-buttons{display:flex;gap:12px;justify-content:center}.confirm-btn{flex:1;padding:12px 20px;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s}.confirm-yes{background:var(--color-success);color:#fff;box-shadow:0 4px 15px #4caf504d}.confirm-yes:hover{transform:translateY(-2px);box-shadow:0 6px 20px #4caf5066}.confirm-no{background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2)}.confirm-no:hover{background:#fff3;transform:translateY(-2px)}@keyframes slideUp{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}.achievement-notification{position:fixed;top:-100px;left:50%;transform:translate(-50%);background:#0a1428f2;border:1px solid var(--color-secondary);border-radius:50px;padding:15px 30px;display:flex;align-items:center;gap:20px;z-index:2000;transition:top .5s cubic-bezier(.175,.885,.32,1.275);width:auto;min-width:320px;box-shadow:0 10px 30px #7209b780}.achievement-notification.show{top:40px}.notif-icon{font-size:30px}.notif-content{flex:1;display:flex;flex-direction:column}.notif-title{font-size:12px;color:var(--color-primary);font-weight:700;text-transform:uppercase}.notif-desc{font-size:16px;color:#fff;margin-top:2px}.notif-reward{font-size:12px;color:var(--color-warning);margin-top:2px}.lobby-content{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:500px;margin:0 auto;padding:30px 20px;box-sizing:border-box;height:100%;position:relative;overflow:hidden}.lobby-header{margin-bottom:40px;text-align:center}.lobby-logo{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.lobby-icon{font-size:70px;margin-bottom:10px;animation:bounce 2s infinite ease-in-out}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-15px)}}.lobby-title{font-size:48px;font-weight:700;background:linear-gradient(135deg,var(--color-primary),var(--color-secondary));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin:0;text-shadow:0 0 20px rgba(76,201,240,.3)}.lobby-stats{display:flex;justify-content:center;gap:40px;margin-top:20px}.stat-item{display:flex;flex-direction:column;align-items:center;gap:5px}.stat-icon{font-size:20px;opacity:.8}.stat-value{font-size:24px;font-weight:700;color:#fff}.lobby-main{width:100%;display:flex;flex-direction:column;align-items:center;gap:20px;flex:1;justify-content:center}.btn-play{width:100%;max-width:300px;padding:25px;background:var(--color-success);border:none;border-radius:40px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:15px;box-shadow:0 10px 25px #4caf5066;transition:transform .2s,box-shadow .2s}.btn-play:hover{transform:scale(1.05);box-shadow:0 15px 35px #4caf5080}.btn-play-icon{font-size:30px}.btn-play-text{font-size:28px;font-weight:700;color:#fff;text-transform:uppercase;letter-spacing:2px}.lobby-info{text-align:center;color:var(--color-text-dim);margin-top:20px}.bottom-nav{display:flex;justify-content:space-around;width:100%;max-width:500px;padding:15px 20px;background:#ffffff0d;border-top:1px solid rgba(255,255,255,.1);position:absolute;bottom:0;left:50%;transform:translate(-50%);border-radius:20px 20px 0 0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-sizing:border-box}.nav-btn{background:none;border:none;color:#fff6;display:flex;flex-direction:column;align-items:center;gap:6px;cursor:pointer;transition:all .2s;padding:5px 15px}.nav-btn:hover{color:#fffc}.nav-btn.active{color:var(--color-primary)}.nav-btn.active .nav-icon{transform:translateY(-5px)}.nav-icon{font-size:24px;transition:transform .2s}.nav-label{font-size:11px;font-weight:600}.achievement-content,.story-content{display:flex;flex-direction:column;width:100%;max-width:600px;height:100%;background:#0a0f1ef2;padding:0;position:relative;overflow:hidden}.achievement-header,.story-header{display:flex;align-items:center;justify-content:space-between;padding:20px;border-bottom:1px solid rgba(255,255,255,.1);background:#ffffff08}.story-title,.achievement-title{font-size:24px;font-weight:700;color:#fff;margin:0}.btn-back,.btn-back-to-chars{background:#ffffff1a;border:none;width:40px;height:40px;border-radius:50%;color:#fff;font-size:20px;cursor:pointer;display:flex;justify-content:center;align-items:center}.header-spacer{width:40px}.achievement-list,.story-list,.character-select{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px;margin-bottom:80px}.character-card{display:flex;align-items:center;gap:20px;padding:20px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:20px;cursor:pointer;transition:all .2s}.character-card:hover{background:#ffffff1a;transform:translate(5px)}.character-card.locked{opacity:.5;filter:grayscale(1);cursor:default}.char-icon{font-size:40px;width:60px;text-align:center}.char-info{display:flex;flex-direction:column;gap:5px}.char-name{font-size:18px;font-weight:700;color:#fff}.char-title{font-size:14px;color:var(--color-primary)}.story-viewer{display:flex;flex-direction:column;height:100%;width:100%}.story-viewer.hidden{display:none!important}.story-viewer-header{display:flex;align-items:center;padding:20px;border-bottom:1px solid rgba(255,255,255,.1);gap:15px}.character-name{font-size:20px;font-weight:700;color:var(--color-primary)}.story-card{display:flex;align-items:center;gap:15px;padding:15px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:16px;cursor:pointer;transition:all .2s}.story-card:hover{background:#ffffff1a}.story-card.locked{opacity:.5;cursor:default}.story-card-icon{font-size:24px;min-width:30px;text-align:center}.story-card-info{flex:1}.story-card-title{font-size:16px;font-weight:700;color:#fff;margin-bottom:4px}.story-card-preview{font-size:12px;color:var(--color-text-dim)}.story-reader{position:absolute;top:0;left:0;width:100%;height:100%;background:var(--bg-deep-blue);z-index:100;display:flex;flex-direction:column;animation:slideUp .3s ease-out}.hidden{display:none!important}.story-reader-header{padding:20px;display:flex;justify-content:flex-end}.btn-close-reader{background:none;border:none;font-size:30px;color:#fff;cursor:pointer}.story-reader-content{padding:40px 30px;display:flex;flex-direction:column;align-items:center;text-align:center;overflow-y:auto}.story-character-icon{font-size:80px;margin-bottom:20px}.story-reader-title{font-size:28px;color:var(--color-warning);margin-bottom:30px}.story-reader-text{font-size:18px;line-height:1.8;color:#ffffffe6;white-space:pre-wrap}.achievement-item{display:flex;align-items:center;gap:15px;padding:15px;background:#ffffff0d;border-radius:16px;border:1px solid transparent}.achievement-item.claimed{border-color:var(--color-success);background:#4caf501a}.achievement-item.unlocked{border-color:var(--color-warning);background:#ff55001a}.achievement-icon{font-size:30px;min-width:40px;text-align:center}.achievement-info{flex:1}.achievement-name{font-size:16px;font-weight:700;color:#fff}.achievement-desc{font-size:13px;color:var(--color-text-dim)}.btn-claim{padding:8px 16px;background:var(--color-warning);border:none;border-radius:20px;color:#fff;font-weight:700;cursor:pointer;animation:pulse 1.5s infinite}@keyframes pulse{0%{box-shadow:0 0 #ff5500b3}70%{box-shadow:0 0 0 10px #f500}to{box-shadow:0 0 #0000}}@media (max-width: 480px){body{padding:5px}#main-wrapper{gap:8px}#game-container{max-height:calc(var(--app-height) - 100px)}#top-bar{padding:10px 12px}#level-info{font-size:14px}#score-info{font-size:12px}#next-circle-container{font-size:11px;gap:6px;padding:3px 6px}#next-circle{width:20px;height:20px}#item-bar{padding:10px;gap:15px;min-width:240px}.item-btn{width:50px;height:50px;font-size:24px}.item-count{font-size:10px;min-width:16px;height:16px}#result-title{font-size:28px}#result-score{font-size:20px}button#result-button{padding:10px 30px;font-size:16px}.lobby-title{font-size:32px}.lobby-subtitle{font-size:14px}.stat-value{font-size:20px}.btn-play{padding:15px;width:90%}.btn-play-text{font-size:20px}.achievement-notification{min-width:280px;padding:10px 20px}.notif-desc{font-size:14px}}@media (max-height: 700px){#top-bar{padding:8px 12px}#level-info{font-size:14px}#score-info{font-size:12px}#item-bar{padding:8px;gap:12px}.item-btn{width:45px;height:45px;font-size:22px}.lobby-icon{font-size:50px;margin-bottom:5px}.lobby-header{margin-bottom:20px}.btn-play{padding:15px}}
